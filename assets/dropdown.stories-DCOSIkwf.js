import{t as y,D as h,T as i,a as m}from"./twig--J2y2TUI.js";import"./_commonjsHelpers-D6-XlEtG.js";const b=e=>{e.extendFunction("include",(o,r)=>{const t=window.SDC_MANIFEST[o];if(!t)throw new Error(`Template ${o} not found`);const{id:a,href:g}=t;try{const s=e.twig({ref:a});if(s)return s.render(r);throw new Error(`Template ${o} not found`)}catch{const p=e.twig({id:a,href:g,async:!1});if(p)return p.render(r);throw new Error(`Template ${o} not found`)}})};b(i);const f=e=>e.extendFilter("clean_unique_id",o=>o);f(i);m(i);i.cache(!1);const d=e=>e,w=(e={})=>{const o=y.twig({id:"/home/runner/work/propel-components/propel-components/components/01-composites/dropdown/dropdown.twig",data:[{type:"raw",value:`
`,position:{start:15,end:16}},{type:"logic",token:{type:"Twig.logic.type.set",key:"id",expression:[{type:"Twig.expression.type.string",value:"dropdown"},{type:"Twig.expression.type.filter",value:"clean_unique_id",match:["|clean_unique_id","clean_unique_id"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],position:{start:16,end:59}},position:{start:16,end:59}},{type:"logic",token:{type:"Twig.logic.type.set",key:"content_id",expression:[{type:"Twig.expression.type.string",value:"dropdown-content"},{type:"Twig.expression.type.filter",value:"clean_unique_id",match:["|clean_unique_id","clean_unique_id"],params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],position:{start:60,end:119}},position:{start:60,end:119}},{type:"raw",value:`
<div class="relative kinetic-dropdown [&_button[aria-expanded=true]]:after:rotate-180">
  <button id="`,position:{start:120,end:223}},{type:"output",position:{start:223,end:231},stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"],position:{start:223,end:231}}]},{type:"raw",value:'" aria-controls="',position:{start:231,end:248}},{type:"output",position:{start:248,end:264},stack:[{type:"Twig.expression.type.variable",value:"content_id",match:["content_id"],position:{start:248,end:264}}]},{type:"raw",value:'" aria-expanded="false" aria-label="Open dropdown" class="px-4 py-3 rounded-lg flex justify-between w-full font-semibold text-left cursor-pointer after:icon-caret/md after:bg-black after:transition"> ',position:{start:264,end:464}},{type:"output",position:{start:464,end:475},stack:[{type:"Twig.expression.type.variable",value:"label",match:["label"],position:{start:464,end:475}}]},{type:"raw",value:` </button>
  <div id="`,position:{start:475,end:497}},{type:"output",position:{start:497,end:513},stack:[{type:"Twig.expression.type.variable",value:"content_id",match:["content_id"],position:{start:497,end:513}}]},{type:"raw",value:'" tabindex="0" aria-labelledby="',position:{start:513,end:545}},{type:"output",position:{start:545,end:553},stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"],position:{start:545,end:553}}]},{type:"raw",value:`" class="d-none absolute w-full bg-gray-100 p-4">
    `,position:{start:553,end:607}},{type:"output",position:{start:607,end:620},stack:[{type:"Twig.expression.type.variable",value:"content",match:["content"],position:{start:607,end:620}}]},{type:"raw",value:`
  </div>
</div>`,position:{start:620,end:620}}],precompiled:!0});o.options.allowInlineIncludes=!0;try{let r=e.defaultAttributes?e.defaultAttributes:[];return Array.isArray(r)||(r=Object.entries(r)),d(o.render({attributes:new h(r),...e}))}catch(r){return d("An error occurred whilst rendering /home/runner/work/propel-components/propel-components/components/01-composites/dropdown/dropdown.twig: "+r.toString())}};(e=>{class o{constructor(t){if(this.trigger=t.querySelector(":scope > button"),!this.trigger)throw new Error("Trigger button not found");if(this.dropdown=t.querySelector(`[aria-labelledby="${this.trigger.id}"]`),!this.dropdown)throw new Error("Dropdown not found");this.init()}close(t){this.trigger===t||this.trigger.contains(t)||(this.dropdown===t||!this.dropdown.contains(t))&&this.trigger.getAttribute("aria-expanded")==="true"&&(this.trigger.setAttribute("aria-expanded","false"),this.trigger.setAttribute("aria-label","Open dropdown"),this.dropdown.classList.add("d-none"),this.dropdown.classList.remove("block"))}init(){document.addEventListener("keydown",t=>{t.key==="Escape"&&this.close(this.dropdown)}),document.addEventListener("click",t=>this.close(t.target)),this.dropdown.addEventListener("focusout",t=>this.close(t.relatedTarget)),this.trigger.addEventListener("click",()=>{if(this.trigger.getAttribute("aria-expanded")==="false"){this.trigger.setAttribute("aria-expanded","true"),this.trigger.setAttribute("aria-label","Close dropdown"),this.dropdown.classList.remove("d-none"),this.dropdown.classList.add("block");return}this.close(this.dropdown)})}}e.KineticDropdown=o})(window);Drupal.behaviors.kineticDropdown={attach(e){once("kinetic-dropdown",".kinetic-dropdown",e).forEach(r=>{new KineticDropdown(r)})}};const T={title:"01-composites/dropdown",tags:["autodocs"],parameters:{docs:{description:{component:"An accessible dropdown with keyboard navigation."},source:{code:"drush propel:add dropdown"}}},argTypes:{label:{control:{type:"text"},type:{required:!1,name:""},table:{type:{summary:"text"}}}},component:w},n={args:{label:"Dropdown Heading"},render:e=>w({...e,content:"<p> Dropdown content </p>"})};var l,c,u;n.parameters={...n.parameters,docs:{...(l=n.parameters)==null?void 0:l.docs,source:{originalSource:`{
  args: {
    label: "Dropdown Heading"
  },
  render: args => dropdown({
    ...args,
    content: \`<p> Dropdown content </p>\`
  })
}`,...(u=(c=n.parameters)==null?void 0:c.docs)==null?void 0:u.source}}};const _=["Default"];export{n as Default,_ as __namedExportsOrder,T as default};
