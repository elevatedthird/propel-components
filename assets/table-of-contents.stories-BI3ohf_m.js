import{t as de,D as ue,T as N,a as fe}from"./twig--J2y2TUI.js";import"./_commonjsHelpers-D6-XlEtG.js";const pe=e=>{e.extendFunction("include",(n,a)=>{const i=window.SDC_MANIFEST[n];if(!i)throw new Error(`Template ${n} not found`);const{id:s,href:c}=i;try{const h=e.twig({ref:s});if(h)return h.render(a);throw new Error(`Template ${n} not found`)}catch{const y=e.twig({id:s,href:c,async:!1});if(y)return y.render(a);throw new Error(`Template ${n} not found`)}})};pe(N);const he=e=>e.extendFilter("clean_unique_id",n=>n);he(N);fe(N);N.cache(!1);const W=e=>e,K=(e={})=>{const n=de.twig({id:"/home/runner/work/propel-components/propel-components/components/02-blocks/table-of-contents/table-of-contents.twig",data:[{type:"raw",value:"<div ",position:{start:0,end:5}},{type:"output",position:{start:5,end:201},stack:[{type:"Twig.expression.type.variable",value:"attributes",match:["attributes"],position:{start:5,end:201}},{type:"Twig.expression.type.key.period",position:{start:5,end:201},key:"addClass"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],position:{start:5,end:201},expression:!0,params:[{type:"Twig.expression.type.string",value:"kinetic-toc",position:{start:5,end:201}}]},{type:"Twig.expression.type.key.period",position:{start:5,end:201},key:"setAttribute"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],position:{start:5,end:201},expression:!0,params:[{type:"Twig.expression.type.string",value:"data-content-selector",position:{start:5,end:201}},{type:"Twig.expression.type.comma",position:{start:5,end:201}},{type:"Twig.expression.type.variable",value:"content_selector",match:["content_selector"],position:{start:5,end:201}},{type:"Twig.expression.type.filter",value:"default",match:["|default","default"],position:{start:5,end:201},params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("],position:{start:5,end:201}},{type:"Twig.expression.type.string",value:"body",position:{start:5,end:201}},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],position:{start:5,end:201},expression:!1}]}]},{type:"Twig.expression.type.key.period",position:{start:5,end:201},key:"setAttribute"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],position:{start:5,end:201},expression:!0,params:[{type:"Twig.expression.type.string",value:"data-heading-selector",position:{start:5,end:201}},{type:"Twig.expression.type.comma",position:{start:5,end:201}},{type:"Twig.expression.type.variable",value:"heading_selector",match:["heading_selector"],position:{start:5,end:201}},{type:"Twig.expression.type.filter",value:"default",match:["|default","default"],position:{start:5,end:201},params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("],position:{start:5,end:201}},{type:"Twig.expression.type.string",value:"h2, h3, h4",position:{start:5,end:201}},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],position:{start:5,end:201},expression:!1}]}]}]},{type:"raw",value:`>
  <nav class="kinetic-toc-inner"></nav>
</div>`,position:{start:201,end:201}}],precompiled:!0});n.options.allowInlineIncludes=!0;try{let a=e.defaultAttributes?e.defaultAttributes:[];return Array.isArray(a)||(a=Object.entries(a)),W(n.render({attributes:new ue(a),...e}))}catch(a){return W("An error occurred whilst rendering /home/runner/work/propel-components/propel-components/components/02-blocks/table-of-contents/table-of-contents.twig: "+a.toString())}};function me(e){const n=[].forEach,a=[].some,i=typeof window<"u"&&document.body,s=" ";let c,h=!0,y=0;function m(t,r){const u=r.appendChild(d(t));if(t.children.length){const p=g(t.isCollapsed);t.children.forEach(w=>{m(w,p)}),u.appendChild(p)}}function l(t,r){const p=g(!1);if(r.forEach(w=>{m(w,p)}),c=t||c,c!==null)return c.firstChild&&c.removeChild(c.firstChild),r.length===0?c:c.appendChild(p)}function d(t){const r=document.createElement("li"),u=document.createElement("a");return e.listItemClass&&r.setAttribute("class",e.listItemClass),e.onClick&&(u.onclick=e.onClick),e.includeTitleTags&&u.setAttribute("title",t.textContent),e.includeHtml&&t.childNodes.length?n.call(t.childNodes,p=>{u.appendChild(p.cloneNode(!0))}):u.textContent=t.textContent,u.setAttribute("href",`${e.basePath}#${t.id}`),u.setAttribute("class",`${e.linkClass+s}node-name--${t.nodeName}${s}${e.extraLinkClasses}`),r.appendChild(u),r}function g(t){const r=e.orderedList?"ol":"ul",u=document.createElement(r);let p=e.listClass+s+e.extraListClasses;return t&&(p=p+s+e.collapsibleClass,p=p+s+e.isCollapsedClass),u.setAttribute("class",p),u}function f(){const t=L(),r=document.querySelector(e.positionFixedSelector);e.fixedSidebarOffset==="auto"&&(e.fixedSidebarOffset=c.offsetTop),t>e.fixedSidebarOffset?r.className.indexOf(e.positionFixedClass)===-1&&(r.className+=s+e.positionFixedClass):r.className=r.className.replace(s+e.positionFixedClass,"")}function C(t){let r=0;return t!==null&&(r=t.offsetTop,e.hasInnerContainers&&(r+=C(t.offsetParent))),r}function b(t,r){return t&&t.className!==r&&(t.className=r),t}function H(t,r){var z,V;e.positionFixedSelector&&f();const u=t,p=(z=r==null?void 0:r.target)!=null&&z.getAttribute?(V=r==null?void 0:r.target)==null?void 0:V.getAttribute("href"):null,w=p&&p.charAt(0)==="#"?U(p.replace("#","")):!1,$=h||w;if(r&&y<5&&y++,$&&c&&u.length>0){const re=I(u),oe=c.querySelector(`.${e.activeLinkClass}`),_=re.id.replace(/([ #;&,.+*~':"!^$[\]()=>|/\\@])/g,"\\$1"),F=window.location.hash.replace("#","");let M=_;const se=R();p&&w?M=p.replace("#",""):F&&F!==_&&se&&(U(_)||y<=2)&&(M=F);const T=c.querySelector(`.${e.linkClass}[href="${e.basePath}#${M}"]`);if(oe===T)return;const ae=c.querySelectorAll(`.${e.linkClass}`);n.call(ae,v=>{b(v,v.className.replace(s+e.activeLinkClass,""))});const ie=c.querySelectorAll(`.${e.listItemClass}`);n.call(ie,v=>{b(v,v.className.replace(s+e.activeListItemClass,""))}),T&&T.className.indexOf(e.activeLinkClass)===-1&&(T.className+=s+e.activeLinkClass);const P=T==null?void 0:T.parentNode;P&&P.className.indexOf(e.activeListItemClass)===-1&&(P.className+=s+e.activeListItemClass);const ce=c.querySelectorAll(`.${e.listClass}.${e.collapsibleClass}`);n.call(ce,v=>{v.className.indexOf(e.isCollapsedClass)===-1&&(v.className+=s+e.isCollapsedClass)}),T!=null&&T.nextSibling&&T.nextSibling.className.indexOf(e.isCollapsedClass)!==-1&&b(T.nextSibling,T.nextSibling.className.replace(s+e.isCollapsedClass,"")),E(T==null?void 0:T.parentNode.parentNode)}}function E(t){return t&&t.className.indexOf(e.collapsibleClass)!==-1&&t.className.indexOf(e.isCollapsedClass)!==-1?(b(t,t.className.replace(s+e.isCollapsedClass,"")),E(t.parentNode.parentNode)):t}function ee(t){const r=t.target||t.srcElement;typeof r.className!="string"||r.className.indexOf(e.linkClass)===-1||(h=!1)}function te(){h=!0}function ne(){return h}function U(t){const r=q();return(document==null?void 0:document.getElementById(t)).offsetTop>r.offsetHeight-r.clientHeight*1.4-e.bottomModeThreshold}function R(){const t=q(),r=t.scrollHeight>t.clientHeight,u=L()+t.clientHeight>t.offsetHeight-e.bottomModeThreshold;return r&&u}function q(){let t;return e.scrollContainer&&document.querySelector(e.scrollContainer)?t=document.querySelector(e.scrollContainer):t=document.documentElement||i,t}function L(){const t=q();return(t==null?void 0:t.scrollTop)||0}function I(t,r=L()){let u;return a.call(t,(p,w)=>{if(C(p)>r+e.headingsOffset+10){const $=w===0?w:w-1;return u=t[$],!0}if(w===t.length-1)return u=t[t.length-1],!0}),u}function le(t){const r=L(),u=I(t,r),p=R();if((!u||r<5)&&!p)window.location.hash==="#"||window.location.hash===""||window.history.pushState(null,null,"#");else if(u&&!p){const w=`#${u.id}`;window.location.hash!==w&&window.history.pushState(null,null,w)}}return{enableTocAnimation:te,disableTocAnimation:ee,render:l,updateToc:H,getCurrentlyHighlighting:ne,getTopHeader:I,getScrollTop:L,updateUrlHashForHeader:le}}const ge={tocSelector:".js-toc",tocElement:null,contentSelector:".js-toc-content",contentElement:null,headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",hasInnerContainers:!1,linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",activeListItemClass:"is-active-li",collapseDepth:0,scrollSmooth:!0,scrollSmoothDuration:420,scrollSmoothOffset:0,scrollEndCallback:function(e){},headingsOffset:1,enableUrlHashUpdateOnScroll:!1,scrollHandlerType:"auto",scrollHandlerTimeout:50,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:!1,includeTitleTags:!1,onClick:function(e){},orderedList:!0,scrollContainer:null,skipRendering:!1,headingLabelCallback:!1,ignoreHiddenElements:!1,headingObjectCallback:null,basePath:"",disableTocScrollSync:!1,tocScrollingWrapper:null,tocScrollOffset:30,bottomModeThreshold:30};function ye(e){const n=[].reduce;function a(l){return l[l.length-1]}function i(l){return+l.nodeName.toUpperCase().replace("H","")}function s(l){try{return l instanceof window.HTMLElement||l instanceof window.parent.HTMLElement}catch{return l instanceof window.HTMLElement}}function c(l){if(!s(l))return l;if(e.ignoreHiddenElements&&(!l.offsetHeight||!l.offsetParent))return null;const d=l.getAttribute("data-heading-label")||(e.headingLabelCallback?String(e.headingLabelCallback(l.innerText)):(l.innerText||l.textContent).trim()),g={id:l.id,children:[],nodeName:l.nodeName,headingLevel:i(l),textContent:d};return e.includeHtml&&(g.childNodes=l.childNodes),e.headingObjectCallback?e.headingObjectCallback(g,l):g}function h(l,d){const g=c(l),f=g.headingLevel;let C=d,b=a(C);const H=b?b.headingLevel:0;let E=f-H;for(;E>0&&(b=a(C),!(b&&f===b.headingLevel));)b&&b.children!==void 0&&(C=b.children),E--;return f>=e.collapseDepth&&(g.isCollapsed=!0),C.push(g),C}function y(l,d){let g=d;e.ignoreSelector&&(g=d.split(",").map(function(C){return`${C.trim()}:not(${e.ignoreSelector})`}));try{return l.querySelectorAll(g)}catch{return console.warn(`Headers not found with selector: ${g}`),null}}function m(l){return n.call(l,function(g,f){const C=c(f);return C&&h(C,g.nest),g},{nest:[]})}return{nestHeadingsArray:m,selectHeadings:y}}function Ce(e){var n=e.duration,a=e.offset;if(typeof window>"u"||typeof location>"u")return;var i=location.hash?h(location.href):location.href;s();function s(){document.body.addEventListener("click",m,!1);function m(l){!c(l.target)||l.target.className.indexOf("no-smooth-scroll")>-1||l.target.href.charAt(l.target.href.length-2)==="#"&&l.target.href.charAt(l.target.href.length-1)==="!"||l.target.className.indexOf(e.linkClass)===-1||be(l.target.hash,{duration:n,offset:a,callback:function(){y(l.target.hash)}})}}function c(m){return m.tagName.toLowerCase()==="a"&&(m.hash.length>0||m.href.charAt(m.href.length-1)==="#")&&(h(m.href)===i||h(m.href)+"#"===i)}function h(m){return m.slice(0,m.lastIndexOf("#"))}function y(m){var l=document.getElementById(m.substring(1));l&&(/^(?:a|select|input|button|textarea)$/i.test(l.tagName)||(l.tabIndex=-1),l.focus())}}function be(e,n){var a=window.pageYOffset,i={duration:n.duration,offset:n.offset||0,callback:n.callback,easing:n.easing||g},s=document.querySelector('[id="'+decodeURI(e).split("#").join("")+'"]')||document.querySelector('[id="'+e.split("#").join("")+'"]'),c=typeof e=="string"?i.offset+(e?s&&s.getBoundingClientRect().top||0:-(document.documentElement.scrollTop||document.body.scrollTop)):e,h=typeof i.duration=="function"?i.duration(c):i.duration,y,m;requestAnimationFrame(function(f){y=f,l(f)});function l(f){m=f-y,window.scrollTo(0,i.easing(m,a,c,h)),m<h?requestAnimationFrame(l):d()}function d(){window.scrollTo(0,a+c),typeof i.callback=="function"&&i.callback()}function g(f,C,b,H){return f/=H/2,f<1?b/2*f*f+C:(f--,-b/2*(f*(f-2)-1)+C)}}function Te(e){const n=e.tocScrollingWrapper||e.tocElement||document.querySelector(e.tocSelector);if(n&&n.scrollHeight>n.clientHeight){const a=n.querySelector(`.${e.activeListItemClass}`);if(a){const s=a.offsetTop-e.tocScrollOffset;n.scrollTop=s>0?s:0}}}let o={},S,D,k,x,O;function X(e){let n=!1;o=xe(ge,e||{}),o.scrollSmooth&&(o.duration=o.scrollSmoothDuration,o.offset=o.scrollSmoothOffset,Ce(o)),S=me(o),D=ye(o),B();const a=ke(o);if(a===null)return;const i=Z(o);if(i===null||(k=D.selectHeadings(a,o.headingSelector),k===null))return;const c=D.nestHeadingsArray(k).nest;if(!o.skipRendering)S.render(i,c);else return this;let h=!1;const y=o.scrollHandlerTimeout||o.throttleTimeout;x=((d,g)=>ve(d,g,o.scrollHandlerType))(d=>{var f,C,b;S.updateToc(k,d),!o.disableTocScrollSync&&!h&&Te(o),o.enableUrlHashUpdateOnScroll&&n&&S.getCurrentlyHighlighting()&&S.updateUrlHashForHeader(k);const g=((C=(f=d==null?void 0:d.target)==null?void 0:f.scrollingElement)==null?void 0:C.scrollTop)===0;(d&&(d.eventPhase===0||d.currentTarget===null)||g)&&(S.updateToc(k),(b=o.scrollEndCallback)==null||b.call(o,d))},y),n||(x(),n=!0),window.onhashchange=window.onscrollend=d=>{x(d)},o.scrollContainer&&document.querySelector(o.scrollContainer)?(document.querySelector(o.scrollContainer).addEventListener("scroll",x,!1),document.querySelector(o.scrollContainer).addEventListener("resize",x,!1)):(document.addEventListener("scroll",x,!1),document.addEventListener("resize",x,!1));let l=null;O=j(d=>{h=!0,o.scrollSmooth&&S.disableTocAnimation(d),S.updateToc(k,d),l&&clearTimeout(l),l=setTimeout(()=>{S.enableTocAnimation()},o.scrollSmoothDuration),setTimeout(()=>{h=!1},o.scrollSmoothDuration+100)},o.throttleTimeout),o.scrollContainer&&document.querySelector(o.scrollContainer)?document.querySelector(o.scrollContainer).addEventListener("click",O,!1):document.addEventListener("click",O,!1)}function B(){const e=Z(o);e!==null&&(o.skipRendering||e&&(e.innerHTML=""),o.scrollContainer&&document.querySelector(o.scrollContainer)?(document.querySelector(o.scrollContainer).removeEventListener("scroll",x,!1),document.querySelector(o.scrollContainer).removeEventListener("resize",x,!1),S&&document.querySelector(o.scrollContainer).removeEventListener("click",O,!1)):(document.removeEventListener("scroll",x,!1),document.removeEventListener("resize",x,!1),S&&document.removeEventListener("click",O,!1)))}function we(e){B(),X(e||o)}const Se=Object.prototype.hasOwnProperty;function xe(...e){const n={};for(let a=0;a<e.length;a++){const i=e[a];for(const s in i)Se.call(i,s)&&(n[s]=i[s])}return n}function j(e,n,a){n||(n=250);let i,s;return function(...c){const h=this,y=+new Date;i&&y<i+n?(clearTimeout(s),s=setTimeout(()=>{i=y,e.apply(h,c)},n)):(i=y,e.apply(h,c))}}function G(e,n){let a;return(...i)=>{clearTimeout(a),a=setTimeout(()=>e.apply(this,i),n)}}function ve(e,n,a="auto"){switch(a){case"debounce":return G(e,n);case"throttle":return j(e,n);default:return n<334?G(e,n):j(e,n)}}function ke(e){try{return e.contentElement||document.querySelector(e.contentSelector)}catch{return console.warn(`Contents element not found: ${e.contentSelector}`),null}}function Z(e){try{return e.tocElement||document.querySelector(e.tocSelector)}catch{return console.warn(`TOC element not found: ${e.tocSelector}`),null}}const He={destroy:B,init:X,refresh:we};Drupal.behaviors.kineticTableOfContents={attach(e){once("kinetic-toc",".kinetic-toc",e).forEach(a=>{const{contentSelector:i,headingSelector:s}=a.dataset;if(i===void 0)throw new error("data-content-selector attribute is undefined.");if(s===void 0)throw new error("data-heading-selector attribute is undefined.");He.init({tocSelector:".kinetic-toc-inner",contentSelector:i,headingSelector:s,hasInnerContainers:!0,ignoreSelector:".toc-ignore",headingsOffset:1,scrollSmoothDuration:100,throttleTimeout:0})})}};const Oe={title:"02-blocks/table-of-contents",tags:["autodocs"],parameters:{docs:{description:{component:"Generates a table of contents for a page using the tocbot library"},source:{code:"drush propel:add table-of-contents"}}},argTypes:{content_selector:{control:{type:"text"},type:{required:!1,name:""},description:"The selector of the elements to create the table of contents from",table:{defaultValue:{summary:"body"},type:{summary:"text"}}},heading_selector:{control:{type:"text"},type:{required:!1,name:""},description:"The selector of the headings to create the table of contents from",table:{defaultValue:{summary:"h2, h3, h4"},type:{summary:"text"}}}},component:K},A={args:{content_selector:".content",heading_selector:"h2, h3, h4"},render:e=>`
      <div class="grid grid-cols-2">
        <div class="col-span-1">${K(e)}</div>
        <div class="col-span-1 content">
            <h2> heading 2 </h2>
            <h3> heading 3 </h3>
            <p> content </p>
            <h2> heading 2 </h2>
            <p> content </p>
            <h2> heading 2 </h2>
            <p> content </p>
            <h2> heading 2 </h2>
            <p> content </p>
        </div>
      </div>`};var Q,Y,J;A.parameters={...A.parameters,docs:{...(Q=A.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {
    content_selector: ".content",
    heading_selector: "h2, h3, h4"
  },
  render: args => {
    return \`
      <div class="grid grid-cols-2">
        <div class="col-span-1">\${table_of_contents(args)}</div>
        <div class="col-span-1 content">
            <h2> heading 2 </h2>
            <h3> heading 3 </h3>
            <p> content </p>
            <h2> heading 2 </h2>
            <p> content </p>
            <h2> heading 2 </h2>
            <p> content </p>
            <h2> heading 2 </h2>
            <p> content </p>
        </div>
      </div>\`;
  }
}`,...(J=(Y=A.parameters)==null?void 0:Y.docs)==null?void 0:J.source}}};const Ae=["Default"];export{A as Default,Ae as __namedExportsOrder,Oe as default};
