var y=Object.defineProperty;var v=(o,i,t)=>i in o?y(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var d=(o,i,t)=>v(o,typeof i!="symbol"?i+"":i,t);import{t as b,D as f,T as p,a as g}from"./twig--J2y2TUI.js";import"./_commonjsHelpers-D6-XlEtG.js";const w=o=>{o.extendFunction("include",(i,t)=>{const e=window.SDC_MANIFEST[i];if(!e)throw new Error(`Template ${i} not found`);const{id:a,href:r}=e;try{const s=o.twig({ref:a});if(s)return s.render(t);throw new Error(`Template ${i} not found`)}catch{const n=o.twig({id:a,href:r,async:!1});if(n)return n.render(t);throw new Error(`Template ${i} not found`)}})};w(p);const T=o=>o.extendFilter("clean_unique_id",i=>i);T(p);g(p);p.cache(!1);const u=o=>o,A=(o={})=>{const i=b.twig({id:"/home/runner/work/propel-components/propel-components/components/00-elements/vimeo/vimeo.twig",data:[{type:"raw",value:`
`,position:{start:55,end:56}},{type:"raw",value:`
<lite-vimeo videoid="`,position:{start:169,end:191}},{type:"output",position:{start:191,end:205},stack:[{type:"Twig.expression.type.variable",value:"video_id",match:["video_id"],position:{start:191,end:205}}]},{type:"raw",value:'" autoplay="',position:{start:205,end:217}},{type:"output",position:{start:217,end:257},stack:[{type:"Twig.expression.type.variable",value:"autoplay",match:["autoplay"],position:{start:217,end:257}},{type:"Twig.expression.type.bool",value:!0,position:{start:217,end:257}},{type:"Twig.expression.type.operator.binary",value:"==",position:{start:217,end:257},precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"true",position:{start:217,end:257}},{type:"Twig.expression.type.string",value:"false",position:{start:217,end:257}},{type:"Twig.expression.type.operator.binary",value:"?",position:{start:217,end:257},precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:`">
</lite-vimeo>
`,position:{start:257,end:274}}],precompiled:!0});i.options.allowInlineIncludes=!0;try{let t=o.defaultAttributes?o.defaultAttributes:[];return Array.isArray(t)||(t=Object.entries(t)),u(i.render({attributes:new f(t),...o}))}catch(t){return u("An error occurred whilst rendering /home/runner/work/propel-components/propel-components/components/00-elements/vimeo/vimeo.twig: "+t.toString())}};class x extends(globalThis.HTMLElement??class{}){constructor(){super(...arguments);d(this,"player",null)}addPrefetch(t,e,a){let r=document.createElement("link");r.rel=t,r.href=e,a&&(r.as=a),r.crossorigin=!0,document.head.append(r)}getThumbnailDimensions(){return{width:720,height:405}}connectedCallback(){this.videoId=this.getAttribute("videoid");let{width:t,height:e}=this.getThumbnailDimensions(),a=window.devicePixelRatio||1;a>=2&&(a*=.75),t=Math.round(t*a),e=Math.round(e*a),fetch(`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${this.videoId}`).then(s=>s.json()).then(s=>{let n=s.thumbnail_url;n=n.replace(/-d_[\dx]+/i,`-d_${t}x${e}`),this.style.backgroundImage=`url("${n}")`});let r=this.querySelector(".ltv-playbtn");this.playLabel=r&&r.textContent.trim()||this.getAttribute("playlabel")||"Play video",r||((r=document.createElement("button")).type="button",r.setAttribute("aria-label",this.playLabel),r.classList.add("ltv-playbtn"),this.append(r)),r.removeAttribute("href"),this.addEventListener("click",()=>this.addIframe(!0))}addIframe(t=!1){if(this.classList.contains("ltv-activated"))return;let e=document.createElement("iframe");e.width=640,e.height=360,e.title=this.playLabel,e.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",e.src=`https://player.vimeo.com/video/${encodeURIComponent(this.videoId)}`,t&&(e.setAttribute("src",e.getAttribute("src")+"?autoplay=1&muted=1&loop=1&autopause=false"),e.setAttribute("muted","muted"),e.setAttribute("autoplay","autoplay"),e.setAttribute("loop","loop"),e.setAttribute("autopause","false")),this.append(e),"Vimeo"in globalThis?this.player=new Vimeo.Player(e):console.warn("Vimeo Player API not loaded. Please ensure the Vimeo Player script is included."),this.classList.add("ltv-activated")}play(){this.player&&(this.player.play(),this.player.setVolume(0))}pause(){this.player&&(this.player.pause(),this.player.setVolume(0))}}globalThis.customElements&&!globalThis.customElements.get("lite-vimeo")&&globalThis.customElements.define("lite-vimeo",x);Drupal.behaviors.LiteVimeo={attach:o=>{const i=(e,a)=>{e.forEach(r=>{r.isIntersecting&&(r.target.addIframe(!0),a.disconnect())})};once("lite-vimeo","lite-vimeo[autoplay='true']",o).forEach(e=>{new IntersectionObserver(i,{root:null,rootMargin:"0px",threshold:.1}).observe(e)})}};const L={title:"00-elements/vimeo",tags:["autodocs"],parameters:{docs:{description:{component:"A wraper around the vimeo-lite web component. Use this if you need more control around the vimeo player."},source:{code:"drush propel:add vimeo"}}},argTypes:{video_id:{control:{type:"text"},type:{required:!1,name:""},table:{type:{summary:"text"}}}},component:A},l={args:{video_id:"27246366"}};var c,m,h;l.parameters={...l.parameters,docs:{...(c=l.parameters)==null?void 0:c.docs,source:{originalSource:`{
  args: {
    video_id: "27246366"
  }
}`,...(h=(m=l.parameters)==null?void 0:m.docs)==null?void 0:h.source}}};const V=["Default"];export{l as Default,V as __namedExportsOrder,L as default};
